generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id    String  @id @default(uuid())
  email String  @unique
  password String @default("eagloo")
  verificationSecret String?
  schedules Schedule[]
  mainthreads Mainthread[]
  subthreads Subthread[]
  // reports Report[]
  authenticated Boolean @default(false)
  banned Boolean @default(false)
  createdAt DateTime @default(now())
}

model Schedule{
  id String @id @default(uuid())
  user User @relation(fields: [userId], references:[id])
  userId String
  content String
  state Int @default(0)
  // progress Progress @default(SCRATCH)
}

enum Progress{
  SCRATCH
  ONGOING
  DONE
}

model Class{
  id String @id @default(uuid())
  name String
  code String
  mainthreads Mainthread[]
}

model Mainthread{
  id String @id @default(uuid())
  user User @relation(fields: [userId], references:[id])
  userId String
  class Class @relation(fields: [classId], references:[id])
  classId String
  title String
  content String
  createdAt DateTime @default(now())
}

model Subthread{
  id String @id @default(uuid())
  user User @relation(fields: [userId], references:[id])
  userId String
  index String
  content String
  createdAt DateTime @default(now())
}

// model Report{
//   id String @id @default(uuid())
//   reporter User @relation(name: "reportBy", fields: [reporterId], references:[id])
//   reporterId String
//   target User @relation()
//   targetId String
// }